#!/usr/bin/env ruby
require 'ezmq'
require 'robot_sweatshop/config'
require 'robot_sweatshop/connections'
using ExtendedEZMQ

subscriber = EZMQ::Subscriber.new port: configatron.logger_port, topic: 'robot-sweatshop-logging'
subscriber.serialize_with_json!

subscriber.listen do |data, topic|
  puts "[#{Time.now.utc}][#{data[:process]}] #{data[:text]}"
end
